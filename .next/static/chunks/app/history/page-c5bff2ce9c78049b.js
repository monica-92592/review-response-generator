(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811],{782:function(e,t,s){Promise.resolve().then(s.bind(s,6511))},6511:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return S}});var a=s(7437),r=s(2265),l=s(5509),n=s(9178),i=s(4226),o=s(8068),c=s(1355),d=s(9379),u=s(1047),m=s(7418),x=s(875),p=s(2135),g=s(8867),h=s(1649),f=s(8736),y=s(740),v=s(3417),b=s(7168),j=s(3247),w=s(1094),N=s(8930);function S(){let[e,t]=(0,r.useState)([]),[s,S]=(0,r.useState)([]),[C,Z]=(0,r.useState)(""),[T,k]=(0,r.useState)({rating:"",businessType:"",tone:"",dateRange:"",qualityScore:"",sentiment:"",provider:""}),[R,z]=(0,r.useState)({field:"timestamp",direction:"desc"}),[E,P]=(0,r.useState)(new Set),[L,A]=(0,r.useState)(!1),[D,O]=(0,r.useState)(!1),[q,F]=(0,r.useState)(!1),[I,B]=(0,r.useState)("list");(0,r.useEffect)(()=>{H()},[]),(0,r.useEffect)(()=>{_()},[e,C,T,R]);let H=()=>{let e=localStorage.getItem("responseHistory");if(e)try{let s=JSON.parse(e).map(e=>({...e,timestamp:new Date(e.timestamp)}));t(s)}catch(e){console.error("Error loading response history:",e)}},_=()=>{let t=[...e];if(C.trim()){let e=C.toLowerCase();t=t.filter(t=>t.review.toLowerCase().includes(e)||t.response.toLowerCase().includes(e)||t.businessType.toLowerCase().includes(e)||t.tone.toLowerCase().includes(e))}if(T.rating&&(t=t.filter(e=>e.rating===T.rating)),T.businessType&&(t=t.filter(e=>e.businessType===T.businessType)),T.tone&&(t=t.filter(e=>e.tone===T.tone)),T.qualityScore){let e=parseInt(T.qualityScore);t=t.filter(t=>(t.qualityScore||0)>=e)}if(T.sentiment&&(t=t.filter(e=>e.sentiment===T.sentiment)),T.provider&&(t=t.filter(e=>e.provider===T.provider)),T.dateRange){let e=new Date,s=parseInt(T.dateRange),a=new Date(e.getTime()-864e5*s);t=t.filter(e=>e.timestamp>=a)}t.sort((e,t)=>{let s=e[R.field],a=t[R.field];if(void 0===s&&void 0===a)return 0;if(void 0===s)return 1;if(void 0===a)return -1;let r=0;return"string"==typeof s&&"string"==typeof a?r=s.localeCompare(a):s instanceof Date&&a instanceof Date?r=s.getTime()-a.getTime():"number"==typeof s&&"number"==typeof a&&(r=s-a),"asc"===R.direction?r:-r}),S(t)},J=(e,t)=>{k(s=>({...s,[e]:t}))},U=e=>{P(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},G=async e=>{try{await navigator.clipboard.writeText(e)}catch(e){console.error("Failed to copy response:",e)}},M=s=>{if(confirm("Are you sure you want to delete this response?")){let a=e.filter(e=>e.id!==s);t(a),localStorage.setItem("responseHistory",JSON.stringify(a)),P(e=>{let t=new Set(e);return t.delete(s),t})}},Q=async()=>{if(0!==E.size){F(!0);try{let s=e.filter(e=>E.has(e.id)).map(e=>({id:e.id,review:e.review,rating:e.rating,businessType:e.businessType,tone:e.tone,responseLength:e.responseLength,provider:e.provider||"auto"})),a=await fetch("/api/bulk-generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({responses:s})}),r=await a.json();if(!a.ok)throw Error(r.error||"Failed to generate responses");let l=e.map(e=>{let t=r.results.find(t=>t.id===e.id);return t&&t.success?{...e,response:t.response,provider:t.provider,generationTime:t.generationTime,timestamp:new Date}:e});t(l),localStorage.setItem("responseHistory",JSON.stringify(l));let n=r.summary.successful,i=r.summary.failed;i>0?alert("Bulk generation completed! ".concat(n," successful, ").concat(i," failed.")):alert("Bulk generation completed successfully for ".concat(n," responses!")),P(new Set)}catch(e){console.error("Bulk generation failed:",e),alert("Bulk generation failed. Please try again.")}finally{F(!1)}}},V=async()=>{O(!0);try{await new Promise(e=>setTimeout(e,1500)),alert("PDF export completed!")}catch(e){console.error("PDF export failed:",e),alert("PDF export failed. Please try again.")}finally{O(!1)}},W=e=>{let t=parseInt(e);return t>=4?"success":t>=3?"warning":"error"},Y=e=>e>=85?"success":e>=70?"warning":"error",K=e=>new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(e);return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsx)("main",{className:"py-8",children:(0,a.jsxs)(l.Z,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Response History"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Manage and analyze your generated responses"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(i.Z,{variant:"outline",icon:b.Z,onClick:H,children:"Refresh"}),(0,a.jsx)(i.Z,{variant:"outline",icon:h.Z,onClick:()=>{let e=new Blob([["Date,Rating,Business Type,Tone,Review,Response,Quality Score,Sentiment,Provider",...s.map(e=>[e.timestamp.toISOString(),e.rating,e.businessType,e.tone,'"'.concat(e.review.replace(/"/g,'""'),'"'),'"'.concat(e.response.replace(/"/g,'""'),'"'),e.qualityScore||"",e.sentiment||"",e.provider||""].join(","))].join("\n")],{type:"text/csv"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="response-history-".concat(new Date().toISOString().split("T")[0],".csv"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(t)},children:"Export CSV"}),(0,a.jsx)(i.Z,{variant:"outline",icon:f.Z,onClick:V,loading:D,children:"Export PDF"})]})]}),(0,a.jsx)(n.Z,{className:"mb-6",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(o.Z,{placeholder:"Search reviews, responses, business types...",value:C,onChange:e=>{Z(e)},icon:j.Z})}),(0,a.jsxs)(i.Z,{variant:"outline",icon:y.Z,onClick:()=>A(!L),children:["Filters ",L?(0,a.jsx)(p.Z,{className:"w-4 h-4 ml-1"}):(0,a.jsx)(x.Z,{className:"w-4 h-4 ml-1"})]})]}),L&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 pt-4 border-t border-gray-200",children:[(0,a.jsx)(c.Z,{value:T.rating,onChange:e=>J("rating",e),options:[{value:"",label:"All Ratings"},{value:"1",label:"⭐ 1 Star"},{value:"2",label:"⭐⭐ 2 Stars"},{value:"3",label:"⭐⭐⭐ 3 Stars"},{value:"4",label:"⭐⭐⭐⭐ 4 Stars"},{value:"5",label:"⭐⭐⭐⭐⭐ 5 Stars"}]}),(0,a.jsx)(c.Z,{value:T.businessType,onChange:e=>J("businessType",e),options:[{value:"",label:"All Business Types"},{value:"restaurant",label:"Restaurant & Food"},{value:"retail",label:"Retail & E-commerce"},{value:"healthcare",label:"Healthcare"},{value:"professional",label:"Professional Services"},{value:"hospitality",label:"Hospitality & Travel"},{value:"technology",label:"Technology"},{value:"other",label:"Other"}]}),(0,a.jsx)(c.Z,{value:T.tone,onChange:e=>J("tone",e),options:[{value:"",label:"All Tones"},{value:"professional",label:"Professional"},{value:"friendly",label:"Friendly"},{value:"formal",label:"Formal"},{value:"casual",label:"Casual"},{value:"empathetic",label:"Empathetic"}]}),(0,a.jsx)(c.Z,{value:T.dateRange,onChange:e=>J("dateRange",e),options:[{value:"",label:"All Time"},{value:"1",label:"Last 24 hours"},{value:"7",label:"Last 7 days"},{value:"30",label:"Last 30 days"},{value:"90",label:"Last 90 days"}]}),(0,a.jsx)(c.Z,{value:T.qualityScore,onChange:e=>J("qualityScore",e),options:[{value:"",label:"All Quality Scores"},{value:"90",label:"90+ (Excellent)"},{value:"80",label:"80+ (Good)"},{value:"70",label:"70+ (Fair)"},{value:"60",label:"60+ (Poor)"}]}),(0,a.jsx)(c.Z,{value:T.sentiment,onChange:e=>J("sentiment",e),options:[{value:"",label:"All Sentiments"},{value:"positive",label:"Positive"},{value:"negative",label:"Negative"},{value:"neutral",label:"Neutral"},{value:"mixed",label:"Mixed"}]}),(0,a.jsx)(c.Z,{value:T.provider,onChange:e=>J("provider",e),options:[{value:"",label:"All Providers"},{value:"openai",label:"OpenAI"},{value:"claude",label:"Claude"},{value:"auto",label:"Auto"}]})]})]})}),E.size>0&&(0,a.jsx)(n.Z,{className:"mb-6 bg-blue-50 border-blue-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-blue-900",children:[E.size," item",1!==E.size?"s":""," selected"]}),(0,a.jsx)(i.Z,{size:"sm",variant:"outline",onClick:Q,loading:q,children:"Bulk Generate"}),(0,a.jsx)(i.Z,{size:"sm",variant:"outline",onClick:()=>{if(0!==E.size&&confirm("Are you sure you want to delete ".concat(E.size," selected responses?"))){let s=e.filter(e=>!E.has(e.id));t(s),localStorage.setItem("responseHistory",JSON.stringify(s)),P(new Set)}},className:"text-red-600 hover:text-red-700",children:"Delete Selected"})]}),(0,a.jsx)(i.Z,{size:"sm",variant:"outline",onClick:()=>P(new Set),children:"Clear Selection"})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",s.length," of ",e.length," responses"]}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsxs)(i.Z,{size:"sm",variant:"outline",onClick:()=>{E.size===s.length?P(new Set):P(new Set(s.map(e=>e.id)))},children:[E.size===s.length?(0,a.jsx)(m.Z,{className:"w-4 h-4"}):(0,a.jsx)(w.Z,{className:"w-4 h-4"}),"Select All"]})})]}),(0,a.jsx)("div",{className:"space-y-4",children:0===s.length?(0,a.jsxs)(n.Z,{className:"p-8 text-center",children:[(0,a.jsx)(v.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No responses found"}),(0,a.jsx)("p",{className:"text-gray-600",children:0===e.length?"You haven't generated any responses yet. Start by creating your first response!":"Try adjusting your search or filters to find what you're looking for."})]}):s.map(e=>(0,a.jsx)(n.Z,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,a.jsx)("div",{className:"pt-1",children:(0,a.jsx)("input",{type:"checkbox",checked:E.has(e.id),onChange:()=>U(e.id),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary-500"})}),(0,a.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)(d.Z,{variant:W(e.rating),children:[e.rating," Star","1"!==e.rating?"s":""]}),(0,a.jsx)(d.Z,{variant:"default",children:e.businessType}),(0,a.jsx)(d.Z,{variant:"default",children:e.tone}),e.qualityScore&&(0,a.jsxs)(d.Z,{variant:Y(e.qualityScore),children:[e.qualityScore,"/100"]}),e.sentiment&&(0,a.jsx)(d.Z,{variant:"default",children:e.sentiment})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:K(e.timestamp)})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Customer Review"}),(0,a.jsx)("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg",children:e.review})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Generated Response"}),(0,a.jsx)("p",{className:"text-gray-700 bg-blue-50 p-3 rounded-lg",children:e.response})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[e.provider&&(0,a.jsxs)("span",{children:["Provider: ",e.provider]}),e.generationTime&&(0,a.jsxs)("span",{children:["Generation Time: ",e.generationTime,"s"]}),e.wasEdited&&(0,a.jsx)("span",{className:"text-blue-600",children:"✓ Edited"}),e.editCount&&e.editCount>0&&(0,a.jsxs)("span",{children:["Edits: ",e.editCount]}),e.copyCount&&e.copyCount>0&&(0,a.jsxs)("span",{children:["Copies: ",e.copyCount]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(i.Z,{size:"sm",variant:"outline",onClick:()=>G(e.response),children:(0,a.jsx)(g.Z,{className:"w-4 h-4"})}),(0,a.jsx)(i.Z,{size:"sm",variant:"outline",onClick:()=>M(e.id),className:"text-red-600 hover:text-red-700",children:(0,a.jsx)(N.Z,{className:"w-4 h-4"})})]})]})]})]})},e.id))})]})})})}},9379:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(7437);function r(e){let{children:t,variant:s="default",size:r="md",className:l=""}=e;return(0,a.jsx)("span",{className:"".concat("inline-flex items-center font-medium rounded-full"," ").concat({default:"bg-gray-100 text-gray-800",primary:"bg-primary-100 text-primary-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",error:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"}[s]," ").concat({sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-0.5 text-sm",lg:"px-3 py-1 text-sm"}[r]," ").concat(l),children:t})}s(2265)},4226:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(7437);function r(e){let{children:t,variant:s="primary",size:r="md",disabled:l=!1,loading:n=!1,icon:i,iconPosition:o="left",onClick:c,type:d="button",className:u=""}=e,m={sm:"w-4 h-4",md:"w-4 h-4",lg:"w-5 h-5"};return(0,a.jsxs)("button",{type:d,disabled:l||n,onClick:c,className:"".concat("inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-primary-600 hover:bg-primary-700 text-white focus:ring-primary-500",secondary:"bg-gray-200 hover:bg-gray-300 text-gray-800 focus:ring-gray-500",outline:"border border-gray-300 hover:bg-gray-50 text-gray-700 focus:ring-primary-500",ghost:"hover:bg-gray-100 text-gray-700 focus:ring-gray-500"}[s]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[r]," ").concat(u),children:[n&&(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 ".concat(m[r]),fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),!n&&i&&"left"===o&&(0,a.jsx)(i,{className:"mr-2 ".concat(m[r])}),t,!n&&i&&"right"===o&&(0,a.jsx)(i,{className:"ml-2 ".concat(m[r])})]})}s(2265)},9178:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(7437);function r(e){let{children:t,className:s="",padding:r="md",shadow:l="md",border:n=!0}=e;return(0,a.jsx)("div",{className:"bg-white rounded-lg ".concat({none:"",sm:"p-4",md:"p-6",lg:"p-8"}[r]," ").concat({none:"",sm:"shadow-sm",md:"shadow-md",lg:"shadow-lg"}[l]," ").concat(n?"border border-gray-200":""," ").concat(s),children:t})}s(2265)},5509:function(e,t,s){"use strict";var a=s(7437);s(2265);var r=s(4508);t.Z=e=>{let{children:t,className:s,maxWidth:l="xl",padding:n="md",as:i="div"}=e;return(0,a.jsx)(i,{className:(0,r.cn)("mx-auto w-full",{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl",full:"max-w-full"}[l],{none:"",sm:"px-4 py-2",md:"px-6 py-4",lg:"px-8 py-6",xl:"px-12 py-8"}[n],s),children:t})}},8068:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(7437);function r(e){let{label:t,placeholder:s,value:r="",onChange:l,type:n="text",disabled:i=!1,error:o,helperText:c,icon:d,iconPosition:u="left",required:m=!1,className:x="",rows:p=3}=e,g=o?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-primary-500 focus:ring-primary-500",h=i?"bg-gray-50 cursor-not-allowed":"bg-white",f="".concat("w-full px-3 py-2 border rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-0"," ").concat(g," ").concat(h," ").concat(x),y="absolute top-1/2 transform -translate-y-1/2 text-gray-400",v="".concat(y," left-3"),b="".concat(y," right-3");return(0,a.jsxs)("div",{className:"w-full",children:[t&&(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t,m&&(0,a.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,a.jsxs)("div",{className:"relative",children:[d&&"left"===u&&(0,a.jsx)(d,{className:v}),(0,a.jsx)("div",{className:d&&"left"===u?"pl-10":d&&"right"===u?"pr-10":"",children:"textarea"===n?(0,a.jsx)("textarea",{value:r,onChange:e=>null==l?void 0:l(e.target.value),placeholder:s,disabled:i,required:m,rows:p,className:f}):(0,a.jsx)("input",{type:n,value:r,onChange:e=>null==l?void 0:l(e.target.value),placeholder:s,disabled:i,required:m,className:f})}),d&&"right"===u&&(0,a.jsx)(d,{className:b})]}),o&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:o}),c&&!o&&(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:c})]})}s(2265)},1355:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(7437);s(2265);var r=s(875);function l(e){let{label:t,options:s,value:l="",onChange:n,placeholder:i="Select an option",disabled:o=!1,error:c,helperText:d,required:u=!1,className:m=""}=e,x=c?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-primary-500 focus:ring-primary-500",p="".concat("w-full px-3 py-2 border rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-0 appearance-none bg-white"," ").concat(x," ").concat(o?"bg-gray-50 cursor-not-allowed":""," ").concat(m);return(0,a.jsxs)("div",{className:"w-full",children:[t&&(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t,u&&(0,a.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("select",{value:l,onChange:e=>null==n?void 0:n(e.target.value),disabled:o,required:u,className:p,children:[(0,a.jsx)("option",{value:"",disabled:!0,children:i}),s.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,a.jsx)(r.Z,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none w-4 h-4"})]}),c&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:c}),d&&!c&&(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:d})]})}},4508:function(e,t,s){"use strict";s.d(t,{cn:function(){return l}});var a=s(1994),r=s(3335);let l=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}}},function(e){e.O(0,[216,744],function(){return e(e.s=782)}),_N_E=e.O()}]);